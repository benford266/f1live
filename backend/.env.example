# F1 Live Data Backend Environment Configuration
# Copy this file to .env and configure for your environment

# Server Configuration
PORT=3001
NODE_ENV=development
LOG_LEVEL=info

# F1 SignalR Configuration
F1_SIGNALR_URL=https://livetiming.formula1.com/signalr
F1_HUB_NAME=Streaming
SIGNALR_RECONNECT_INTERVAL=5000
SIGNALR_MAX_RECONNECT_ATTEMPTS=10

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Security Configuration
REQUIRE_API_KEY=false
TRUSTED_PROXIES=
MAX_PAYLOAD_SIZE=10mb
SESSION_SECRET=change-this-in-production
BCRYPT_ROUNDS=12
JWT_EXPIRY=1h

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
API_RATE_LIMIT_WINDOW_MS=60000
API_RATE_LIMIT_MAX_REQUESTS=30
WS_CONNECTION_LIMIT=50
WS_EVENTS_PER_MINUTE=120

# WebSocket Configuration
WEBSOCKET_HEARTBEAT_INTERVAL=30000
WEBSOCKET_MAX_CONNECTIONS=100
WEBSOCKET_CONNECTION_TIMEOUT=60000
WEBSOCKET_MAX_EVENT_RATE=30

# Performance Configuration
DATA_THROTTLE_INTERVAL=100
MAX_CACHE_SIZE=1000
COMPRESSION_LEVEL=6

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_FAMILY=4
REDIS_CONNECTION_NAME=f1-live-data
REDIS_KEEP_ALIVE=30000
REDIS_LAZY_CONNECT=false

# Redis Connection Settings
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_DELAY_FAILOVER=100
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_RETRY_DELAY_CLUSTER_DOWN=300
REDIS_ENABLE_AUTO_PIPELINING=true

# Redis Cluster Configuration (set REDIS_CLUSTER_ENABLED=true to enable)
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=localhost:6379,localhost:6380,localhost:6381
REDIS_CLUSTER_READY_CHECK=true
REDIS_CLUSTER_MAX_REDIRECTIONS=16
REDIS_CLUSTER_SCALE_READS=slave

# Redis Cache TTL Settings (in seconds)
REDIS_TTL_DEFAULT=300
REDIS_TTL_SESSION=1800
REDIS_TTL_DRIVERS=600
REDIS_TTL_TIMING=60
REDIS_TTL_WEATHER=120
REDIS_TTL_TRACK=30
REDIS_TTL_POSITION=10
REDIS_TTL_TELEMETRY=5

# Redis Key Prefixes
REDIS_KEY_PREFIX=f1:
REDIS_PREFIX_SESSION=session:
REDIS_PREFIX_DRIVERS=drivers:
REDIS_PREFIX_TIMING=timing:
REDIS_PREFIX_WEATHER=weather:
REDIS_PREFIX_TRACK=track:
REDIS_PREFIX_POSITION=position:
REDIS_PREFIX_TELEMETRY=telemetry:
REDIS_PREFIX_WEBSOCKET=ws:
REDIS_PREFIX_RATE_LIMIT=rl:

# Redis Compression Settings
REDIS_COMPRESSION_ENABLED=true
REDIS_COMPRESSION_THRESHOLD=1024
REDIS_COMPRESSION_ALGORITHM=lz4

# Redis Memory Management
REDIS_MAX_MEMORY_POLICY=allkeys-lru
REDIS_MAX_MEMORY_USAGE=256mb

# Redis Failover Configuration
REDIS_FAILOVER_ENABLED=true
REDIS_FALLBACK_TO_MEMORY=true
REDIS_HEALTH_CHECK_INTERVAL=30000
REDIS_RECONNECT_INTERVAL=5000
REDIS_MAX_RECONNECT_ATTEMPTS=10

# Redis Monitoring
REDIS_MONITORING_ENABLED=true
REDIS_LOG_SLOW_QUERIES=true
REDIS_SLOW_QUERY_THRESHOLD=100
REDIS_COLLECT_METRICS=true
REDIS_METRICS_INTERVAL=60000

# Logging Configuration
LOG_FILE=logs/app.log